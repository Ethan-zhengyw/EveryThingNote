# Golang学习

## exercise code repository: https://github.com/Ethan-zhengyw/golang-exercise-code

## 1.1 概览

### Go 语言项目

#### Docker

#### Kubernetes

#### Caddy（网站服务器）

#### CockroachDB

### Go语言的设计初衷

#### 针对其它语言的痛点进行设计

#### 并加入并发编程

#### 为大数据，微服务，并发而生的通用编程语言

### Go语言与转型

#### 项目转型首选语言

#### 软件工程师转型、添加技术栈的首选语言

### Go语言的特点

#### 1. 没有“对象”，没有继承多态，没有泛型，没有try/catch

#### 2. 有接口，函数式编程，CSP并发模型（goroutine + channel）

#### 重点：怎么利用Go语言实现其它语言利用1中所描述的特性能够实现的功能呢？

### Go语言课程

#### 语法 + 例子

##### 变量、选择、循环、指针、数组、容器

#### 面向接口

##### 结构体

##### duck typing

##### 组合思想

#### 函数式编程

##### 闭包

#### 工程化

##### 资源管理

##### 错误处理

##### 性能调优

#### 并发编程

##### goroutine + channel

##### 调度器

#### 项目

##### 爬虫项目

###### 单任务版

###### 并发版

###### 分布式

## 1.2 安装环境

### ...

## 2.1 变量定义

### 定义方式

#### var [变量名] [变量类型]  

#### var [变量名] [变量类型]  = [变量初始值]

#### [变量名] := [变量初始值]

#### var尽量不用，用:=

##### 函数外必须使用var，作用域是包内的

### 变量一旦定义就必须使用

## 2.2 内建变量类型

### 基本类型和初始值

#### bool, string

#### (u)int,  uintptr

##### 长度跟随操作系统

#### (u)int(8/16/32/64)

##### 固定长度整数

#### byte，rune

##### rune长度为32位

###### utf8中很多字符都是3字节的，因此采用4字节的int32作为rune

###### go语言没有char，rune就是go语言中的char

#### float32, float64

#### complex64, complex128

### 强制类型转换

#### 不存在隐式类型转换

## 2.3 常量定义

### const关键字

### iota自增值种子

## 2.4 条件语句

### if

#### 条件里可以定义变量

### switch

#### switch不需要break

### 条件不需要括号

## 2.5 循环

### for

#### 死循环非常好写，在go语言中经常用到死循环

#### 条件不需要括号

#### 括号换行需要打逗号

## 2.6 函数

### 函数作为参数

### 返回值类型放在后面

### 可返回多个值

### 可变参数列表

#### func sum(numbers ...int) int

### 值传递 vs 引用传递

#### C/C++既可以值传递又可以引用传递

#### Python/Java绝大多数都是引用传递，除了少部分的自建类型外

#### Go语言只有值传递

##### 性能就下降了？/通过指针解决

## 2.7 指针

### 指针类型 *int

#### var a int = 2
var pa *int = &a
*pa = 3

### 指针不能运算

## 3.1 数组

### var arr1 [3]int
	arr2 := [3]int{1, 2, 3}
	arr3 := [...]int{1, 2, 3, 4}
var grid [4][5]int

### 利用range关键子获得下标与值

### 数组是值类型

#### 函数参数定义使用数组需要指定数组长度，否则类型无法匹配上

#### 参数传递过程会拷贝数组

#### 可以通过传指针的方式达到call by ref的效果

### go语言一般不使用数组，使用切片

## 3.2 切片

### 切片是数组的一个视图，修改视图会同时修改原始数组，即使通过函数传递切片

### 左闭右开

### 支持对切片进行切片（reslice）

### 切片的下标超过切片的最大长度，但在原始数组的capacity内的话能够扩展取到

#### 只能向后扩展，不能向前扩展

### slice == (ptr, len, cap)

## 3.3 切片的操作

### append(slice, N)

#### 删除元素通过切片append操作实现

##### apend(s1[:3], s1[4:]...)

### pop from front/back 通过切片下标控制

### 添加元素超过cap，系统会重新分配更大的底层数组

### 切片变量的初始值为nil

#### var s []int

### 切片是一个数组的视图，它的容量能够自动扩展，类似STL中的vector

## 3.4 Map

### 类型定义 map[K]V

### 遍历方法同数组，使用arrange关键字

### map是一个hashmap，内部数据存储是无序的

#### 如果需要有序，需要把key取出来放到一个slice中进行排序

### key不存在时，使用该key查询得到对应类型的初始值，不会报错

### 判断值是否存在 if val1, ok = map["key1"]; ok {} else {}

### 删除元素

#### delete(m, key)

### map的key

#### map使用哈希表，必须可以比较相等

#### 除了slice，map，function的内建类型都可以作为key

#### 自定义类型（Struct）不包含slice，map，function也可作为key

## 3.5 Map例题，寻找最长不含有重复字符的字串

## 3.6 字符和字符串处理

### 类型转换

#### 使用utf8.RuneCountInString获得字符数量，支持中文

#### 使用len获得字节长度

#### 使用[]byte获得字节

#### 使用[]rune获得通用的字符数组，每个字符占4个字节，系统会新开辟一个空间来存放该数组，能够无差别地处理中英文

### 库函数

#### Fields, Split, Join

#### Contains, Index

#### ToLower, ToUpper

#### Trim, TrimRight, TrimLeft

## 4.1 结构体和方法

### go语言仅支持封装，不支持继承和多态

### 自定义工厂函数进行初始化

#### go语言局部变量也可以将其地址返回给上层函数使用

##### 局部变量创建在堆上还是栈上由编译器决定

### 函数定义能够指定接收者

#### 定义新方法，同时指定结构体接收者，达到定义结构体方法的效果

#### 值接收者 vs 指针接收者

##### 要改变内容必须使用指针接收者

##### 结构体过大也考虑使用指针接收者

##### 保持代码一致性

### 空也能调用方法

## 4.2 包和封装

### 封装（针对包）

#### CamelCase

#### 首字母大写表示public

#### 首字母小些表示private

### 包

#### 每个目录一个包

##### 目录下的所有文件都属于同一个包，子目录中的文件除外

#### 每个目录一个main

#### 为结构定义的方法必须放在同一个包内

##### 但是可以是不同的文件

### 命名技巧

#### 包内的结构体不需要重复包名，例如tree包中的TreeNode直接叫Node即可

## 4.3 扩展已有类型

### 使用组合

#### 定义一个结构体，结构体内使用已有类型

### 定义别名

#### Queue基于[]int实现（将[]int重命名为Queue）

##### type Queue []int

## 4.4 GOPATH环境变量

### 默认在~/go

### 官方推荐：所有项目和第三方库都放在同一个GOPATH下

### 也可以将每个项目放在不同的GOPATH

### go imports工具

#### go get -v github.com/gpmgo/gopm

## 999 我的疑问

### 1. Go 语言针对其它语言的哪些痛点进行了哪些设计？

#### Java/C++等面向对象语言支持封装继承和多态，使用起来相对复杂麻烦，go语言面向接口，没有class，只有struct仅支持封装，不支持继承和多态

#### 使用rune类型支持字符串处理unicode

#### 对象分配的位置，由编译器决定、优化

#### nil也可以调用方法

### 2. 其它语言对的发编程是怎样的？Go语言的并发编程的相比于其它语言有什么异同？

### 3. 为什么说Go语言是为大数据，微服务，并发而生的通用编程语言？

### 4. 为什么说Go语言是项目转型的首选语言？

### 5. 怎么利用Go语言实现其它语言利用“对象”，继承多态，泛型，try/catch等特性能够实现的功能呢？

### 6. 为什么Go语言变量定义变量名要放在变量类型之前？

### 7. 求(a^2 + b^2)^0.5，转出来小了1怎么处理

### 8. 为什么go语言中经常用到死循环？

#### goroutine 死循环 互相通信
