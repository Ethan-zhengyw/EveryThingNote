# Web-Scale Applications

## 基于广泛的基础设施平台

### 垂直领域

#### 技术支持

#### 混合云架构支持

#### 公有云基础设施平台

##### 1. 基础设施（Region/AZ/POP）

##### 2. 核心服务（计算/存储/网络/CDN/数据库）

##### 3. 安全与合规

##### 4. 应用服务

###### 分析

###### 应用

###### 移动

###### 部署运维

###### Iot

###### 企业应用

##### 5. 市场生态

### portfolio提供更丰富的技术组合

## 扩展日记

### 第一天，一个用户

#### 技术组合

##### 1EC2（部署完整应用栈） + 1EIP + Amazon Router 53（DNS）

##### 垂直扩展

###### 优点

####### 最简单的方法

###### 缺点

####### 有天花板，有限制

####### 可靠性/可用性受到影响，不适用于生产环境

######## 没有冗余、无法failover

######## 所有的鸡蛋放在同一个篮子里

###### 能够提升

####### I/O，支持PIOPS

####### CPU

####### Memory

####### Storage

### 第二天，用户数>1

#### 技术组合

##### 数据库独立部署，【鸡蛋放到两个篮子里】

###### 部署在内部网络安全性得到提高

###### 选项

####### 自己部署在EC2

######## 涉及LICENSE

### 用户数>100

#### 技术组合

##### 数据库独立部署【提高天花板】

###### 选项

####### 云服务

######## RDS

######## Dynamo

######## S3

### 用户数>1000，考虑可靠性，failover与冗余

#### 技术组合

##### 多AZ部署【多AZ容灾+水平扩展】

###### 后端EC2冗余部署，使用弹性负载均衡服务进行请求转发

###### 数据库

####### RDS双AZ 主备部署

### 用户数10K～100K

#### 技术组合

##### 基于（用户数>1000）【水平扩展+缓存】

###### 数据库补充：读写分离，读性能水平扩展

###### 考虑性能与效率、成本优化（优化用户体验）

####### 静态数据缓存

######## S3 + CloudFront

######## 优点

######### 降低云上后端压力，扩展量减少，一定程度优化成本

####### 会话/状态数据缓存

######## Dynamo DB or ElasticCache

######## 优点

######### 避免存储在EC2实例本地，中心化存储，有状态应用-->无状态应用，支持水平扩展，无需考虑session与EC2的亲和性

####### auto-scaling

######## 根据系统负载指标，自动申请/释放资源，提高资源利用率，优化成本

### 用户数>500K

#### 技术组合

##### 基于（用户数10K~100K）【自动化+监控+松耦合】

###### 资源多了，配置、管理需要自动化

###### 支持需求演进，SOA，微服务，松耦合

####### 队列

######## 消息

######## 作业

###### 使用应用管理解决方案

####### 基础设施模板

####### 应用编排

### 用户数>1百万

#### 技术组合

##### all

###### 多AZ容灾

###### 弹性负载均衡

###### Auto-Scaling

###### 松耦合 SOA/微服务架构

###### 智能内容分发CDN

###### 缓存

### 用户数5百万～1千万

#### 技术组合

##### 数据库主节点写性能瓶颈问题解决

###### 分库

####### 根据业务功能分配独立的数据库

####### 无法解决单一数据表数据量/访问量大的问题

###### 分表

####### 将表分割（水平/垂直）存储到不同主机

###### 根据数据类型，业务特点选择其他类型的数据库

#### 瓶颈

##### 数据库主节点写性能

## 总结

### 可靠性

#### 多AZ容灾

#### 冗余组件部署

#### 系统拆分为微服务（松耦合）

### 可扩展性

#### 使用使能自动扩展伸缩的服务

##### ELB、S3、SQS

#### 在系统内、外缓存必要的数据

### 性能效率/成本控制

#### 准备好了就上auto-scaling吧

### 卓越操作

#### 使用自动化工具管理基础设施

#### 装备齐全：指标/监控/日志...

#### 不重复造轮子
